#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#
export TERM="xterm-256color"
POWERLEVEL9K_MODE='nerdfont-fontconfig'

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# load my functions and completions
fpath=(~/.zprezto/functions $fpath)
autoload -U ~/.zprezto/functions/*(:t)
fpath=(~/.zprezto/completion $fpath)
autoload -U ~/.zprezto/completion/*(:t)
compdef _goenv goenv

# Load my profile.
source ~/.zprofile

# Terminal fonts
# https://github.com/ryanoasis/nerd-fonts#option-1-install-script

# GVM
[[ -s "/home/jpbetz/.gvm/scripts/gvm" ]] && source "/home/jpbetz/.gvm/scripts/gvm"

# Golang defaults
export GOROOT=/usr/local/go
export PATH=$GOROOT/bin:$PATH


############# Powerlevel9k config #####################

cdp() {
  local env_dir=$(lookup_goenv_dir)
  if [ $env_dir ]; then
    local project_dir=$env_dir/src/$(jq -r .project $env_dir/.goenv)
    cd $project_dir
  fi
}

custom_goenv() {
  local env_dir=$(lookup_goenv_dir)
  if [ $env_dir ]; then
    local name=$(jq -r .name $env_dir/.goenv)
    echo "\uf427 $name"
  fi
}

# http://ethanschoonover.com/solarized
base03='234'
base02='235'
base01='240'
base00='241'
base0='244'
base1='245'
base2='254'
base3='230'
yellow='136'
orange='166'
red='160'
magenta='125'
violet='61'
blue='33'
cyan='37'
green='64'

POWERLEVEL9K_CUSTOM_GOENV="custom_goenv"
POWERLEVEL9K_CUSTOM_GOENV_BACKGROUND='black'
POWERLEVEL9K_CUSTOM_GOENV_FOREGROUND=$base3

POWERLEVEL9K_GO_VERSION_BACKGROUND=$base3
POWERLEVEL9K_GO_VERSION_FOREGROUND=$base03

POWERLEVEL9K_VCS_GIT_ICON=''
POWERLEVEL9K_VCS_CLEAN_BACKGROUND=$blue
POWERLEVEL9K_VCS_CLEAN_FOREGROUND=$base03
POWERLEVEL9K_VCS_MODIFIED_BACKGROUND=$yellow
POWERLEVEL9K_VCS_MODIFIED_FOREGROUND=$base03
POWERLEVEL9K_VCS_UNTRACKED_BACKGROUND=$magenta
POWERLEVEL9K_VCS_UNTRACKED_FOREGROUND=$base03

DIR_BACKGROUND='black'
DIR_FOREGROUND=$base3
POWERLEVEL9K_DIR_HOME_BACKGROUND=$DIR_BACKGROUND
POWERLEVEL9K_DIR_DEFAULT_BACKGROUND=$DIR_BACKGROUND
POWERLEVEL9K_DIR_HOME_SUBFOLDER_BACKGROUND=$DIR_BACKGROUND
POWERLEVEL9K_DIR_HOME_FOREGROUND=$DIR_FOREGROUND
POWERLEVEL9K_DIR_DEFAULT_FOREGROUND=$DIR_FOREGROUND
POWERLEVEL9K_DIR_HOME_SUBFOLDER_FOREGROUND=$DIR_FOREGROUND
POWERLEVEL9K_HOME_ICON=''
POWERLEVEL9K_HOME_SUB_ICON=''
POWERLEVEL9K_FOLDER_ICON=''
POWERLEVEL9K_SHORTEN_DIR_LENGTH=5

POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(custom_goenv go_version vcs context dir)
POWERLEVEL9K_DISABLE_RPROMPT=true

DEFAULT_USER=jpbetz

POWERLEVEL9K_SHOW_CHANGESET=true

